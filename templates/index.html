{% extends "bootstrap/base.html" %}

{% block title %}VRodu{% endblock title %}

{% block metas %}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
{% endblock metas %}

{% block styles %}
    {{ super() }}
    <link href="{{ url_for('static', filename='primitives.latest.css') }}" media="screen" rel="stylesheet" type="text/css" />
    <link href="{{ url_for('static', filename='styles.css') }}" media="screen" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='jquery-ui.css') }}">
{% endblock styles %}

{% block content %}
    <div class="tree_container">
        <div id="draggable" class="ui-widget-content ui-draggable">
            <div id="diagram"></div>
        </div>
    </div>

    <div class="vk_block">
        <a href="#" onclick="VK.External.showInviteBox();" class="right-link">Пригласить друзей</a>
        <a href="#" onclick="sentNotification()" class="right-link">Отправить уведомление</a>
        <a href="#" onclick="getFriends()" class="right-link">Получить список друзей</a>
        <a href="#" onclick="getAppFriends()" class="right-link">Друзья в приложении</a>
        <a href="#" onclick="sendRequest()" class="right-link">Отправить запрос</a>
    </div>

    <!-- Modals -->
    <div id="input_block" title="Добавить новую персону">
        <label id="new_person_label">Добавить отдельную персону</label>
        <input type="radio" id="new_person" name="relative_type" value="new_person">
        <input id="person_id" value="" class="flushable" type="text" hidden />
        <input id="link_id" value="" class="inactive flushable" type="text" hidden /><br/>
        <label>Имя</label><br />
        <input id="first_name" value="" class="flushable" type="text"/><br />
        <label>Фамилия</label><br />
        <input id="last_name" value="" class="flushable" type="text"/><br />
        <label>Отчество</label><br />
        <input id="middle_name" value="" class="flushable" type="text"/><br />
        <label>Биография</label><br />
        <textarea id="description" class="flushable"></textarea><br />
        <label>Год рождения</label><br />
        <input id="birth" value="" class="flushable" type="text"/><br />
        <label>Жив(а)?</label><input type="checkbox" id="is_alive" checked><br />
        <div id="death_block">
            <label>Год смерти</label><br />
            <input id="death" value="" class="flushable" type="text"/><br />
        </div>
        <label>Место жительства</label><br />
        <input id="location" value="" class="flushable" type="text"/><br />
        <label>Пол:</label><br />
        <label>Мужской</label>
        <input type="radio" id="male" name="sex" value="M" checked>
        <label>Женский</label>
        <input type="radio" id="female" name="sex" value="F"><br />
    </div>

    <div id="dialog-confirm" title="Удалить персону?">
        <span id="deleted_item"></span>
    </div>
    <div id="dialog-message" title="Ошибка!">
        <span id="failed_message"></span>
    </div>
    <div id="link-tip">
        <span>Нажмите на персону, которую хотите связать</span>
    </div>

    <div id="add_single">+</div>
    <!-- Modals -->

    <div id="full_info_block">
        <input id="full_id" value="" type="text" hidden/>
        <ul>
            <li><a href="#full_info_tab">Полная информация</a></li>
            <li><a href="#full_adding_tab">Добавить персону</a></li>
        </ul>
        <div id="full_info_tab">
            <div id="full_photo_block">
                <img id="full_photo" src=""/>
                <div id="full_death_belt" class="death_belt"></div>
            </div>
            <div id="full_name_block">
                <input id="full_last_name" class="full_field form-control" type="text" size="15" placeholder="Фамилия" disabled/>
                <input id="full_name" class="full_field form-control" type="text" size="15" placeholder="Имя" disabled/>
                <input id="full_middle_name" class="full_field form-control" type="text" size="15" placeholder="Отчество" disabled/>
            </div>
            <div style="clear: both"></div>
            <div id="bd_edit">
                <input id="full_birth_edit" class="full_field full_field_enabled date-own form-control" type="text">
                <span> - </span>
                <input id="full_death_edit" class="full_field_enabled date-own form-control" type="text" disabled>
                <span>Жив(а)?</span>
                <input id="full_is_alive_edit" type="checkbox" checked/>
            </div>
            <input id="full_birth_death" type="text" class="full_field"  size="15" disabled />
            <textarea id="full_description" class="full_field form-control" disabled></textarea>
            <br />
            <span id="full_location_span">Место рождения: </span><input id="full_location" placeholder="Место рождения" class="full_field form-control" type="text" disabled/>
                <button id="full_edit_save">Сохранить</button>
                <button id="full_edit_cancel">Отменить</button>
                <button id="full_edit" >Редактировать</button>
                <button id="full_delete">Удалить персону</button>
            <br /><br />
        </div>
    <div id="full_adding_tab">
        <div id="full_relations">
            <div id="add-person" title="Добавить родителя">
                <label>Родителя</label>
                <input type="radio" id="parent"  name="relative_type" value="parent" checked>
                <label>Ребенка</label>
                <input type="radio" id="child" name="relative_type" value="child"> <br />
                <button id="add_person_button" onclick="open_input_block()">Добавить нового</button>
                <button id="link_person_button">Связать существуещего</button><br />
                <button id="link_marriage_button">Связать супруга</button><br />
                <label>Добавить из ВК</label><br />
                <input type="text" id="vk_id" value="" class="flushable"><br />
                <div id="full_search_results"></div>
            </div>
        </div>
    </div>
        <div id="full_close" >X</div>
    </div>
{% endblock content %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript" src="//vk.com/js/api/xd_connection.js"></script>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=3e171cbb-7d54-47b4-98e5-21877d7eeb70&lang=ru_RU" type="text/javascript"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='jquery-ui-1.10.2.custom.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='primitives.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='custom_primitives.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='jquery.ui.touch-punch.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='tree-scripts.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='scripts.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='vk_scripts.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='app_start.js') }}"></script>
{% endblock scripts %}
